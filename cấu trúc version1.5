cofure_bot/
├── main.py                      # 🚀 Khởi động Flask & định tuyến webhook
├── version_handler.py           # 🧠 Ghi chú phiên bản bot đang chạy
├── config.py                    # ⚙️ Cấu hình nhóm coin, chiến thuật, đơn vị tiền
├── requirements.txt             # 📦 Thư viện cần cài (Flask, requests…)
├── Procfile                     # 🛠 Lệnh khởi chạy bot trên Render
├── README.md                    # 📘 Tài liệu hướng dẫn triển khai
├── risk_manager.py              # 📊 Tính SL/TP/R:R từ giá VND
├── .env                         # 🔐 Token bí mật & port khởi động
│
├── admin/                       # 👤 Quản trị và xét duyệt người dùng
│   ├── approval_handler.py      # ✅ Xử lý lệnh /duyet hoặc /huy user
│   └── config_loader.py         # 📥 Load danh sách admin từ file
│
├── messenger/                   # 💬 Giao tiếp với Facebook Messenger
│   ├── mess_handler.py          # 📥 Nhận, phân tích và xử lý tin nhắn
│   ├── message_sender.py        # 📤 Gửi phản hồi tin nhắn về Messenger
│   └── registry_manager.py      # 📁 Quản lý danh sách user pending & đã duyệt
│
├── macro/                       # 🌍 Phân tích tin tức và lịch vĩ mô
│   ├── event_watcher.py         # 🔔 Quét lịch CPI, FOMC, NFP…
│   └── news_analyzer.py         # 📈 Phân tích ảnh hưởng tin tức đến thị trường
│
├── scheduler/                   # ⏰ Tự động gửi tin theo lịch trình
│   ├── macro_reporter.py        # 🌅 Gửi bản tin sáng về lịch vĩ mô
│   ├── macro_advisor.py         # 📊 Phân tích sau khi tin ra
│   └── cron_daemon.py           # 🧭 Kích hoạt tác vụ theo khung giờ hệ thống
│
├── core/                        # 🏹 Sinh tín hiệu kỹ thuật crypto
│   ├── signal_generator.py      # 🔁 Sinh lệnh Scalping / Swing
│   ├── entry_checker.py         # ✅ Kiểm tra điều kiện đủ để vào lệnh
│   ├── multi_signal_manager.py  # 📌 Gợi ý lệnh low confidence
│   ├── liquidity_alert_runner.py# 💧 Cảnh báo vùng thanh khoản mạnh
│   ├── coin_filter.py           # 🧹 Lọc coin volume yếu hoặc rủi ro cao
│   ├── signal_analyzer.py       # 📊 Phân tích các chỉ báo: RSI, Funding…
│   ├── strategy_classifier.py   # 🧠 Gắn chiến thuật cho từng lệnh
│   └── risk_evaluator.py        # ⚠️ Đánh giá độ rủi ro từng vị thế
│
├── userflow/                    # 👁 Theo dõi coin hoặc sàn theo người dùng
│   ├── coin_listener.py         # 📌 Quản lý danh sách coin đang được theo dõi
│   └── exchange_listener.py     # 🔄 Lấy dữ liệu sàn phù hợp với user
│
├── marketdata/                  # 📈 Lấy dữ liệu thị trường real-time
│   ├── price_fetcher.py         # 💰 Lấy giá coin hiện tại theo thời gian
│   ├── liquidity_detector.py    # 💧 Phân tích vùng thanh khoản động
│   ├── volume_tracker.py        # 🔎 Theo dõi biến động volume bất thường
│   ├── rsi_calculator.py        # 📐 Tính chỉ số RSI
│   └── market_snapshot.py       # 🖼 Ảnh chụp tổng quan thị trường
│
├── messages/                    # ✉️ Format nội dung lệnh gửi đi
│   ├── templates.py             # 📋 Mẫu entry, TP, SL, emoji & chiến thuật
│   └── emoji_map.py             # 😀 Mapping biểu tượng theo trạng thái lệnh
│
├── report/                      # 📄 Tổng kết lệnh theo ngày hoặc tuần
│   └── end_day_report.py        # 📊 Thống kê R:R và tỷ lệ thắng cuối ngày
│
├── utils/                       # 🔧 Tiện ích hỗ trợ toàn hệ thống
│   ├── formatter.py             # 🔢 Format số liệu, giá trị, %
│   ├── validator.py             # ✅ Kiểm tra dữ liệu đầu vào
│   ├── mid_tracker.py           # 🔁 Ghi message_id để chống phản hồi trùng
│   ├── permissions.py           # 🔐 Kiểm tra quyền admin của user
│   └── json_utils.py            # 📁 Đọc/ghi file JSON an toàn
│
├── handlers/                    # 🔄 Xử lý các lệnh do user gửi
│   ├── duyet_handler.py         # ✅ Lệnh /duyet [PSID] để duyệt user qua Messenger
│   ├── xacnhan_handler.py       # 📋 Lệnh /xacnhan → hiển thị trạng thái duyệt
│   └── broadcast_handler.py     # 📢 Lệnh /broadcast gửi tin cho toàn bộ user đã duyệt
│
├── data/                        # 📁 Trạng thái hệ thống
│   ├── admin_config.json        # 👤 DS PSID có quyền quản trị bot
│   ├── user_registry.json       # ✅ DS user đã được duyệt
│   ├── pending_users.json       # ⌛ DS user đang chờ duyệt
│   └── processed_mids.json      # 🔁 DS message_id đã xử lý để tránh phản hồi lặp

               
🧠 Timeline hoạt động bot Cofure | 00:00 → 23:59
🕒 Thời điểm	⚙️ Bot thực hiện gì
00:00 – 05:59
🔎 Quét sớm phiên Á nếu có volume tăng hoặc MA đảo chiều → Nếu có tín hiệu VIP mạnh → gửi ngay lệnh (Market) → Nếu thị trường yên lặng → bot nghỉ tạm 📥 Webhook vẫn hoạt động → người mới nhắn tin vẫn được ghi nhận | | 06:00 | 📨 Gửi bản tin sáng cho toàn bộ người dùng → Chào ngày mới 🧠 → Tỷ giá USDT/VND theo sàn người dùng → Lịch kinh tế hôm nay: tin CPI, FOMC, GDP… → Nhận định xu hướng BTC / Altcoin | | 07:00 | 🔔 Quét lịch tin tức vĩ mô → Nếu có tin trọng yếu → bot báo thời điểm + tác động → Nếu không có tin → gửi cảnh báo: “Không có tin quan trọng” | | 06:00 – 22:00 | 📡 Chu kỳ gửi tín hiệu Futures → Cứ mỗi 15–30 phút → bot gửi 1 batch gồm 5 lệnh → Cấu trúc batch: 3 Long + 2 Short → Gắn rõ chiến thuật: Scalping hoặc Swing → Hiển thị giá theo sàn ONUS hoặc Nami: cả VND + USD → Lệnh yếu hoặc thị trường sideway → gắn 📌 Tham khảo → Hiện rõ kiểu lệnh ngay cạnh Entry: (Market) hoặc (Limit) ⚡ Nếu phát hiện lệnh VIP / biến động mạnh → gửi tức thì không chờ batch | | Giờ tin ra (bất kỳ) | 🔔 Bot phản ứng tức thì nếu có tin CPI, FOMC, NFP… → Phân tích tác động đến thị trường → Gửi cảnh báo + tạo lệnh mới nếu cần | | 22:00 – 23:00 | 📊 Gửi báo cáo cuối ngày → Thống kê các lệnh MUA / BÁN đã gửi → Trung bình R:R → Gửi lời chúc ngủ ngon 🌙 | | 23:00 – 23:59 | 🔄 Reset dữ liệu → Volume, funding, MA, trạng thái coin → Lọc top coin tiềm năng → Lên lịch bản tin sáng 06:00 hôm sau |
