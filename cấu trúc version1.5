📁 cofure_bot/
│
├── messenger/              # 👥 Xử lý người dùng mới + bật/tắt tín hiệu
│   ├── mess_handler.py           # Xử lý lời chào, phản hồi lựa chọn, trạng thái duyệt
│   ├── signal_toggle.py          # Cho phép người dùng bật / tắt nhận tín hiệu theo ý muốn
│   └── registry_manager.py       # Lưu trạng thái approved, timestamp, history user
│
├── scheduler/              # 📅 Quản lý bản tin theo giờ: sáng, vĩ mô, phiên, khép phiên
│   ├── morning_report.py         # Gửi bản tin chào sáng + xu hướng thị trường
│   ├── news_schedule.py          # Báo lịch tin vĩ mô mỗi ngày (CPI, FOMC...)
│   ├── signal_dispatcher.py      # Gửi tín hiệu phiên (chu kỳ 15–30 phút/lệnh)
│   └── summary_report.py         # Tổng kết phiên lúc 22h + hiệu suất + chúc ngủ ngon
│
├── core/                   # 🧠 Xử lý kỹ thuật để sinh tín hiệu thật
│   ├── signal_generator.py       # Phân tích volume / funding / mô hình → sinh lệnh
│   ├── emergency_signal.py       # Lệnh khẩn → báo sớm TRƯỚC khi giá chạy
│   ├── strength_classifier.py    # Phân loại độ mạnh lệnh: mạnh / tiêu chuẩn / tham khảo
│   └── pre_breakout_detector.py  # Quét tín hiệu chuẩn bị breakout / breakdown
│
├── marketdata/             # 📊 Lấy dữ liệu từ sàn ONUS Futures
│   ├── futures_tracker.py        # Lấy danh sách coin Futures + funding các cặp coin
│   ├── volume_scanner.py         # Quét volume realtime từng coin
│   └── spread_monitor.py         # Theo dõi spread / RSI để phát hiện lực nén
│
├── macro/                 # 🕯️ Phân tích tin vĩ mô và phản ứng thị trường
│   ├── forex_factory_fetcher.py  # Lấy lịch tin từ Forex Factory (CPI, FOMC, Fed...)
│   ├── news_analyzer.py          # Xử lý kết quả tin ra → đánh giá volume / spread phản ứng
│   └── macro_advisor.py          # Gửi lời khuyên chiến lược sau khi tin ra (nên đứng ngoài / Long / Short)
│
├── messages/              # 💬 Trình bày tin nhắn bot cho đẹp, dễ hiểu
│   ├── format_signal.py          # Format lệnh: entry, TP, SL, emoji theo độ mạnh
│   ├── greeting_format.py        # Format tin chào sáng + chúc ngủ ngon cá nhân hoá
│   └── emergency_format.py       # Format riêng cho lệnh khẩn → dễ nhận diện
│
├── admin/                 # 🛠️ Quản lý người dùng & broadcast
│   ├── approval_panel.py         # Duyệt user mới / kiểm tra trạng thái approved
│   └── broadcast_manager.py      # Gửi tin hệ thống / kiểm soát vận hành bot
│
├── utils/                 # 🔧 Hàm phụ trợ phục vụ các nhóm khác
│   ├── vnđ_formatter.py          # Chuyển đổi số sang tiền VNĐ rõ ràng
│   ├── spam_guard.py             # Chống spam tín hiệu / giới hạn tần suất gửi
│   ├── config_loader.py          # Load dữ liệu `.env` hoặc config khác
│   └── logger.py                 # Lưu log hoạt động → theo dõi lỗi
│
├── data/                  # 🗂️ File dữ liệu JSON
│   ├── user_status.json          # Trạng thái approved, tín hiệu của mỗi user
│   ├── signal_log.json           # Log các tín hiệu đã gửi + hiệu suất TP / SL
│   ├── news_log.json             # Lưu lịch tin đã gửi
│   └── coin_list.json            # Danh sách coin ONUS Futures đang quét
│
├── main.py                # 🚀 Khởi động Flask + webhook Messenger + routing đến các nhóm
├── init_files.py          # 🔧 Tự tạo file JSON dữ liệu nếu chưa có (khởi động bot lần đầu)
├── requirements.txt       # 📦 Khai báo thư viện: Flask, requests, dotenv, gunicorn...
├── Procfile               # ⚙️ Cấu hình khởi động bot trên Heroku hoặc VPS
├── .env.example           # 🔐 File mẫu môi trường → MESSENGER_TOKEN, PORT, VERIFY_TOKEN...


               
*****Công dụng bot*****
phần 1:🔔 Khi người dùng lần đầu nhắn tin Messenger:

1️⃣ Bot gửi lời chào:
“Chào bạn 👋 Mình là Cofure — trợ lý gửi tín hiệu giao dịch thị trường ONUS.  
Bạn có muốn nhận bản tin & tín hiệu mỗi ngày không ạ?”

2️⃣ Hiển thị lựa chọn:
✅ Đồng ý  
❌ Từ chối

→ Nếu chọn ✅:
• Bot phản hồi:
“Bạn đã đăng ký nhận tín hiệu rồi nha!  
Hiện tại bạn đang chờ xét duyệt từ [Trương Tấn Phương](https://fb.com/quangnamttp)”  
• Lưu trạng thái: `approved = false`

→ Nếu chọn ❌:
• Bot phản hồi lịch sự:
“Không sao đâu, bạn có thể bật lại bất kỳ lúc nào nha 😊”

3️⃣ Sau khi admin xét duyệt thủ công:
• Bot cập nhật trạng thái `approved = true`  
• Người dùng bắt đầu nhận bản tin & tín hiệu hằng ngày

🔒 Người chưa được duyệt:
→ Không nhận bất kỳ bản tin, tín hiệu hay cảnh báo nào  
→ Đảm bảo không spam, không gây khó chịu với user mới
👤 Nếu user không muốn nhận tín hiệu nữa:

1️⃣ Khi user nhắn:
→ “Tắt tín hiệu” / “Không nhận nữa” / “Stop” / “Tạm nghỉ”…

2️⃣ Bot xử lý:
• Gửi xác nhận:
“Đã ghi nhận yêu cầu. Tín hiệu sẽ tạm dừng gửi từ bây giờ nha!”

• Cập nhật trạng thái: `signal_active = false`  
• Dừng toàn bộ bản tin, lệnh, cảnh báo

3️⃣ Nếu user muốn bật lại:
→ Nhắn: “Bật tín hiệu lại” / “Muốn nhận lại”  
→ Bot khôi phục: `signal_active = true`  
→ Gửi tin xác nhận: “Bạn đã bật lại chế độ nhận tín hiệu rồi nha!”

Phần2: 🕒 Khung giờ hoạt động: 06:00 → 22:00 mỗi ngày

🌞 06:00 — Chào buổi sáng + bản tin đầu ngày
• Tin nhắn cá nhân hóa: “Chào buổi sáng nhé {Tên} ☀️…”  
• Nội dung:
   ▸ Giá VNĐ BTC / ETH / SOL  
   ▸ Funding, volume, xu hướng  
• Dùng emoji nhẹ → tạo thiện cảm

📅 07:00 — Lịch tin vĩ mô
• Nếu không có tin:
→ “📅 Hôm nay không có tin tức vĩ mô quan trọng.  
Chúc bạn một ngày trade thật thành công nha!”

• Nếu có tin mạnh (CPI, FOMC...):
→ Bot gửi:
   ▸ Giờ ra tin  
   ▸ Loại tin  
   ▸ Mức ảnh hưởng  
   ▸ Gợi ý chiến lược → đứng ngoài hoặc chờ thời điểm

⚡ Mỗi 15–30 phút từ 06h → 22h — bot gửi 5 lệnh:
• Gồm 3 Scalping + 2 Swing  
• Mỗi lệnh có:
   ✔️ Loại: Market / Limit  
   ✔️ Entry / TP / SL bằng VNĐ  
   ✔️ Lý do kỹ thuật: volume, funding, mô hình, RSI  
   ✔️ Độ mạnh:
      📊 Mạnh ≥70%  
      📊 Tiêu chuẩn 50–69%  
      📊 Tham khảo <50%

⏰ Tín hiệu khẩn — ngoài chu kỳ
• Nếu volume / funding tăng bất thường → bot kích hoạt  
• Quét tất cả coin trên ONUS Futures  
• Báo TRƯỚC khi giá chạy → giúp user vào sớm đón sóng  
• Tin nhắn ví dụ:
  “⏰ Funding CHI vừa nghiêng Long mạnh, volume tăng đều.  
  Có thể cân nhắc MUA quanh vùng 32.800 VNĐ trước khi breakout.”

🧠 Dự báo sóng sớm — không đợi giá chạy
• Bot phát hiện mô hình tích lũy  
• Spread co hẹp, funding lệch, RSI tích cực  
→ Nếu các yếu tố đồng thuận → bot sinh lệnh trước cây nến bật

🕯️ Xử lý khi tin vĩ mô ra
1️⃣ Bot gửi số liệu:  
→ CPI thực tế / Dự báo / Kỳ trước  
→ Lãi suất FED / Dự báo thị trường

2️⃣ Phân tích phản ứng:
→ Funding / volume / spread / RSI biến động thế nào?

3️⃣ Gửi lời khuyên:
→ Ví dụ:
  “🕯️ CPI thấp hơn dự báo → market tích cực.  
  Funding BTC đang tăng nhẹ → có thể Long sau 5 phút nếu ổn định.”

→ Nếu thị trường rõ xu hướng → bot sinh lệnh chiến lược

🌒 22:00 — Tổng kết phiên
• Báo hiệu suất TP / SL  
• Biểu đồ tỷ lệ MUA / BÁN  
• Dự báo ngày mai  
• Lời chúc ngủ ngon:
→ “🌙 Cảm ơn bạn đã đồng hành cùng Cofure hôm nay. 😴 Ngủ ngon nha!”
