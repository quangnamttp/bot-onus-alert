cofure_bot/
├── main.py                      # 🚀 Khởi động Flask & định tuyến webhook
├── version_handler.py           # 🧠 Hiển thị phiên bản đang chạy
├── config.py                    # ⚙️ Cấu hình nhóm coin, chiến thuật, đơn vị tiền
├── requirements.txt             # 📦 Các thư viện cần cài (Flask, requests…)
├── Procfile                     # 🛠 Lệnh khởi chạy bot trên Render
├── README.md                    # 📘 Hướng dẫn triển khai, khởi động
├── risk_manager.py              # 📊 Tính SL/TP/R:R từ giá ONUS
├── .env                         # 🔐 Token bí mật & PORT khởi động
│
├── messenger/                   # 💬 Giao tiếp qua Facebook Messenger
│   ├── mess_handler.py          # 📥 Nhận, phân tích và xử lý tin nhắn đầu vào
│   ├── message_sender.py        # 📤 Gửi phản hồi về Messenger
│   └── registry_manager.py      # 📁 Lưu & kiểm tra người dùng đã kích hoạt bot
│
├── scheduler/                   # ⏰ Tự động gửi tin & lệnh theo giờ
│   ├── macro_reporter.py        # 🌅 Gửi bản tin sáng lúc 06:00
│   ├── macro_advisor.py         # 📊 Phân tích sau tin CPI/FOMC/NFP
│   ├── end_day_report.py        # 📄 Gửi báo cáo cuối ngày lúc 22:00
│   └── cron_daemon.py           # 🧭 Điều phối các tác vụ theo khung giờ
│
├── core/                        # 🔍 Sinh lệnh kỹ thuật crypto
│   ├── signal_generator.py      # 🔁 Tạo batch lệnh Scalping / Swing (3 Long + 2 Short)
│   ├── entry_checker.py         # ✅ Kiểm tra điểm vào lệnh
│   ├── coin_filter.py           # 🧹 Lọc coin rủi ro thấp / volume mạnh
│   ├── signal_analyzer.py       # 📊 Phân tích RSI, Funding, MA
│   ├── strategy_classifier.py   # 🧠 Gắn chiến thuật: Market / Limit
│   └── risk_evaluator.py        # ⚠️ Ước tính độ rủi ro vị thế
│
├── macro/                       # 🌍 Lịch tin & phân tích vĩ mô
│   ├── event_watcher.py         # 🔔 Quét lịch tin CPI/FOMC/NFP/GDP
│   └── news_analyzer.py         # 📈 Đánh giá tác động vĩ mô đến thị trường
│
├── marketdata/                  # 📈 Dữ liệu thị trường ONUS theo thời gian thực
│   ├── price_fetcher.py         # 💰 Lấy giá từng coin theo VND/USD
│   ├── volume_tracker.py        # 🔎 Phát hiện biến động volume
│   ├── liquidity_detector.py    # 💧 Phân tích thanh khoản
│   └── market_snapshot.py       # 🖼 Tổng quan thị trường hiện tại
│
├── messages/                    # ✉️ Format nội dung tín hiệu gửi cho người dùng
│   ├── templates.py             # 📋 Mẫu lệnh Entry / TP / SL / emoji
│   └── emoji_map.py             # 😀 Gắn biểu tượng chiến thuật / độ mạnh
│
├── utils/                       # 🔧 Tiện ích hỗ trợ toàn hệ thống
│   ├── formatter.py             # 🔢 Format số liệu, phần trăm
│   ├── mid_tracker.py           # 🔁 Ghi message_id để chống phản hồi trùng
│   └── json_utils.py            # 📁 Đọc & ghi file JSON an toàn
│
├── data/                        # 📁 Trạng thái hệ thống lưu tạm
│   ├── user_registry.json       # ✅ Người dùng đã kích hoạt bot
│   └── processed_mids.json      # 🔁 Message ID đã phản hồi để tránh lặp
               
🧠 Timeline hoạt động bot Cofure | 00:00 → 23:59
🕒 Thời điểm	⚙️ Bot thực hiện gì
00:00 – 05:59
🔎 Quét sớm phiên Á nếu có volume tăng hoặc MA đảo chiều → Nếu có tín hiệu VIP mạnh → gửi ngay lệnh (Market) → Nếu thị trường yên lặng → bot nghỉ tạm 📥 Webhook vẫn hoạt động → người mới nhắn tin vẫn được ghi nhận | | 06:00 | 📨 Gửi bản tin sáng cho toàn bộ người dùng → Chào ngày mới 🧠 → Tỷ giá USDT/VND theo sàn người dùng → Lịch kinh tế hôm nay: tin CPI, FOMC, GDP… → Nhận định xu hướng BTC / Altcoin | | 07:00 | 🔔 Quét lịch tin tức vĩ mô → Nếu có tin trọng yếu → bot báo thời điểm + tác động → Nếu không có tin → gửi cảnh báo: “Không có tin quan trọng” | | 06:00 – 22:00 | 📡 Chu kỳ gửi tín hiệu Futures → Cứ mỗi 15–30 phút → bot gửi 1 batch gồm 5 lệnh → Cấu trúc batch: 3 Long + 2 Short → Gắn rõ chiến thuật: Scalping hoặc Swing → Hiển thị giá theo sàn ONUS hoặc Nami: cả VND + USD → Lệnh yếu hoặc thị trường sideway → gắn 📌 Tham khảo → Hiện rõ kiểu lệnh ngay cạnh Entry: (Market) hoặc (Limit) ⚡ Nếu phát hiện lệnh VIP / biến động mạnh → gửi tức thì không chờ batch | | Giờ tin ra (bất kỳ) | 🔔 Bot phản ứng tức thì nếu có tin CPI, FOMC, NFP… → Phân tích tác động đến thị trường → Gửi cảnh báo + tạo lệnh mới nếu cần | | 22:00 – 23:00 | 📊 Gửi báo cáo cuối ngày → Thống kê các lệnh MUA / BÁN đã gửi → Trung bình R:R → Gửi lời chúc ngủ ngon 🌙 | | 23:00 – 23:59 | 🔄 Reset dữ liệu → Volume, funding, MA, trạng thái coin → Lọc top coin tiềm năng → Lên lịch bản tin sáng 06:00 hôm sau |
